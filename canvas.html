
<!DOCTYPE html>
<html>
<head>
	<title>Canvas</title>
	<style type="text/css">

		.container{
			width: 80%;
			background-color: #d5f5e3;
			margin: auto;
			min-height: 500px;
		}

		canvas{
			background-color: white; 
		}

	</style>
</head>
<body>

	<div class="container">

		<canvas id="canvas" width="500px" height="500px">
			Tu navegador no soporta canvas
		</canvas>
		<!--<img id="grito" src="grito.png">-->
	</div>

	<script type="text/javascript">
		//window.onload = function() {
			
		var canvas = document.getElementById('canvas');
		

			if (canvas.getContext) {
				// var ctx = canvas.getContext('2d');

				//Cuadritos

				//ctx.fillStyle = "rgb(200,0,0)";
				//ctx.fillRect (10,10,55,50);

				//ctx.fillStyle = "rgba(0,0,200,0.5)";
				//ctx.fillRect (30,30,55,50);

				//Linea

				//ctx.moveTo(0,0);
				//ctx.lineTo(200,100);
				//ctx.stroke();

				//Circulo

				//ctx.beginPath();
				//ctx.arc(95,50,40,0,2 * Math.PI);
				//ctx.stroke();

				//Texto Hello Word

				//ctx.font = "30px Arial";
				//ctx.strokeText("Hello World", 10,50);

				//Gradiantes

				//var grd = ctx.createLinearGradient(0,0,200,0);
				//grd.addColorStop(0,"red");
				//grd.addColorStop(1,"white");

				//ctx.fillStyle = grd;
				//ctx.fillRect(10,10,150,80);

				//Gradiantes circulares

				//var grd = ctx.createRadialGradient(75,50,5,90,60,100);
				//grd.addColorStop(0,"red");
				//grd.addColorStop(1,"white");

				//ctx.fillStyle = grd;
				//ctx.fillRect(10,10,150,80);

				//var img = document.getElementById("grito");
				//ctx.drawImage(img,10,10);

				//Eventos dibujo

				//canvas.addEventListener('mousemove',function(evt){ 

				//	if(isPressed == true){
				//		ctx.fillStyle = "rgb(81,86,86)"; 
	            //      ctx.beginPath();
	            //      ctx.arc(evt.offsetX, evt.offsetY,3,0,2*Math.PI)
	            //      ctx.fill()
				//	}

                //})

				//canvas.addEventListener('mouseup',function(evt){ 
				//	isPressed = false;
                    
                //})

				//canvas.addEventListener('mousedown',function(evt){ 
				//	isPressed = true;
                    
                //})

                //Avatar

                //Torso

                //ctx.fillStyle = "rgb( 244, 201, 230)";
				//ctx.fillRect (170,190,105,110);

				//Pernas

				//ctx.beginPath();

				//ctx.fillStyle = "rgb( 90, 188, 234 )";

				//ctx.moveTo(170,300);
				//ctx.lineTo(175,430);
				//ctx.lineTo(205,430);
				//ctx.lineTo(220,350);
				//ctx.lineTo(240,430);
				//ctx.lineTo(265,430);
				//ctx.lineTo(275,300);
				//ctx.lineTo(170,300);

				//ctx.fill();

				//brazos

				//ctx.beginPath();

				//ctx.fillStyle = "rgb( 244, 201, 230)";

				//ctx.moveTo(174,186);
				//ctx.lineTo(100,295);
				//ctx.lineTo(125,295);
				//ctx.lineTo(190,200);
				//ctx.lineTo(173,190);

				//ctx.fill();

				//ctx.beginPath();

				//ctx.fillStyle = "rgb( 244, 201, 230)";

				//ctx.moveTo(272,188);
				//ctx.lineTo(370,295);
				//ctx.lineTo(345,295);
				//ctx.lineTo(255,200);
				//ctx.lineTo(275,190);

				//ctx.fill();

				//zapatos

				//ctx.beginPath();

				//ctx.fillStyle = "rgb( 95, 106, 111 )";
				//ctx.fillRect (165,430,40,20);
				//ctx.fillRect (240,430,40,20);

				//ctx.beginPath();

				//ctx.fillStyle = "rgb(  97, 71, 65 )";
				//ctx.fillRect (170,110,105,80);

				//ctx.beginPath();

				//ctx.fillStyle = "rgb( 97, 71, 65 )";
				//ctx.arc(222,127,55,0,2 * Math.PI);
				//ctx.fill();

				//ctx.beginPath();
				
				//ctx.fillStyle = "rgb( 255, 223, 216)";
				//ctx.arc(222,127,49,0,2 * Math.PI);
				//ctx.fill();

				//ctx.beginPath();

				//ctx.fillStyle = "rgb( 255, 223, 216)";
				//ctx.fillRect (201,170,40,20);
				
				//ctx.beginPath();

				//ctx.fillStyle = "rgb( 255, 223, 216)";
				//ctx.arc(110,300,14,0,2 * Math.PI);
				//ctx.fill();

				//ctx.beginPath();

				//ctx.fillStyle = "rgb( 255, 223, 216)";
				//ctx.arc(360,300,14,0,2 * Math.PI);
				//ctx.fill();

				//ctx.beginPath();

				//ctx.fillStyle = "rgb(  79, 152, 92  )";
				//ctx.arc(205,120,8,0,2 * Math.PI);
				//ctx.fill();

				//ctx.beginPath();

				//ctx.fillStyle = "rgb(  79, 152, 92  )";
				//ctx.arc(240,120,8,0,2 * Math.PI);
				//ctx.fill();

				//ctx.beginPath();

				//ctx.fillStyle = "rgb( 3, 6, 12  )";
				//ctx.arc(223,135,8,0,1 * Math.PI);
				//ctx.fill();

				//ctx.beginPath();

				//ctx.font = "18px Arial";
				//ctx.strokeText("Maria", 200,240);

				//Paisaje

				//Arbol

				//ctx.fillStyle = "rgb( 133, 103, 87 )";
				//ctx.fillRect (50,320,45,140);

				// ctx.beginPath();

				// ctx.fillStyle = "rgb( 89, 169, 118  )";
				// ctx.arc(40,300,40,0,2 * Math.PI);
				// ctx.fill();

				// ctx.beginPath();

				// ctx.arc(88,300,40,0,2 * Math.PI);
				// ctx.fill();
				// ctx.arc(110,250,40,0,2 * Math.PI);
				// ctx.fill();
				// ctx.arc(30,250,40,0,2 * Math.PI);
				// ctx.fill();
				// ctx.arc(35,200,40,0,2 * Math.PI);
				// ctx.fill();
				// ctx.arc(100,200,40,0,2 * Math.PI);
				// ctx.fill();
				// ctx.arc(70,160,40,0,2 * Math.PI);
				// ctx.fill();
				// ctx.arc(70,250,40,0,2 * Math.PI);
				// ctx.fill();

				// ctx.beginPath();

				// ctx.fillStyle = "rgb( 203, 35, 12 )";
				// ctx.arc(40,300,7,0,2 * Math.PI);
				// ctx.fill();

				// ctx.arc(40,150,7,0,2 * Math.PI);
				// ctx.fill();

				// ctx.beginPath();

				// ctx.arc(100,140,7,0,2 * Math.PI);
				// ctx.fill();

				// ctx.beginPath();

				// ctx.arc(70,230,7,0,2 * Math.PI);
				// ctx.fill();

				// ctx.beginPath();

				// ctx.arc(100,250,7,0,2 * Math.PI);
				// ctx.fill();

				// //Casita

				// ctx.fillStyle = "rgb( 240, 229, 228 )";
				// ctx.fillRect (200,320,210,140);

				// ctx.beginPath();

				// ctx.fillStyle = "rgb( 0, 0, 0 )";
				// ctx.fillRect (240,340,40,40);

				// ctx.fillStyle = "rgb( 0, 0, 0 )";
				// ctx.fillRect (330,340,40,40);

				// ctx.beginPath();

				// ctx.fillStyle = "rgb(165, 125, 113 )";
				// ctx.fillRect (280,390,40,70);

				// ctx.beginPath();

				// ctx.fillStyle = "rgb( 0, 0, 0 )";
				// ctx.arc(310,430,5,0,2 * Math.PI);
				// ctx.fill();

				// ctx.beginPath();

				// ctx.fillStyle = "rgb( 232, 145, 95 )";

				// ctx.moveTo(300,250);
				// ctx.lineTo(150,320);
				// ctx.lineTo(450,322);
				// ctx.lineTo(300,250);

				// ctx.fill();

				// //Sol

				// ctx.beginPath();

				// ctx.fillStyle = "rgb( 255, 249, 71 )";
				// ctx.arc(440,60,50,0,2 * Math.PI);
				// ctx.fill();

				// //Pasto

				// ctx.beginPath();

				// ctx.fillStyle = "rgb( 164, 226, 115 )";
				// ctx.fillRect (0,460,500,40);

				// ctx.beginPath();

		var canvas = null, ctx = null,x=0,y=0; 
		var izquierda = 1,arriba = 0, derecha = 2, abajo = 3;
		var direccion = derecha, speed = 5;
		var pausa = false;
		var player = null, comida = null;
		var puntos = 0;
		var walls = new Array();

		window.requestAnimationFrame = (function(){
			return window.requestAnimationFrame || 
				window.mozRequestAnimationFrame ||
				window.webkitRequestAnimationFrame ||
				function (callback){
					window.setTimeout(callback,17);
				}
		}());

		function Rectangle(x,y,w,h,c){
			this.x=x;
			this.y=y;
			this.w=w;
			this.h=h;
			this.c=c;

			this.paint =function(ctx){
				ctx.fillStyle=this.c;
				ctx.fillRect(this.x,this.y,this.w,this.h);
			}

			this.intersects = function(target){
				if( this.x < target.x + target.w  && 
					this.x + this.w > target.x    &&
					this.y < target.y + target.h  &&
					this.y + this.h > target.y){
					return true;
				}
			}
		}


		function puntaje(){
			puntos+=1;
			ctx.fillStyle = "rgb(255, 255, 255)"
			ctx.fillRect(20,50, 100,canvas.height-10);
			ctx.fillStyle = "rgb(0, 0, 0)";
            ctx.font = "18px Arial";
            ctx.fillText("Puntaje: "+ puntos, 20,canvas.height-10);
			console.log("Print punto");
		}

		function paint(ctx)
		{
			ctx.fillStyle = "#000";
			ctx.fillRect(0,0,canvas.width,canvas.height-50);

			player.paint(ctx); 

			comida.paint(ctx);

			if(pausa == true){
				ctx.fillStyle = "white";
				ctx.textAlign = "center";
				ctx.fillText("Pausa", 197,150);
			}

			for(var i = walls.length -1; i>=0; i--){
				walls[i].paint(ctx)
			}
		}


		function upt(){

			if(pausa == false){

			if (direccion==arriba) {
				player.y -=speed;
				if(player.y<0){
					player.y = canvas.height-60;
				}
			}
			if (direccion==abajo) {
				player.y += speed;
				if(player.y>=canvas.height-55){
					player.y = -10;
				}
			}
			if (direccion==izquierda) {
				player.x -= speed;
				if (player.x<0) {
					player.x = canvas.width;
				}
			}
			if (direccion==derecha) {
				player.x += speed;
				if(player.x>canvas.width){
					player.x = -10;
				}
			} 
			
			if (player.intersects(comida)) {
				comida.x = random(canvas.width-10);
				comida.y = random(canvas.height-50);
				puntaje();
			}

			for(var i = walls.length -1; i>=0; i--){
				if(player.intersects(walls[i])){
					alert("Perdiste");
				}
			}

		 }
		}

		//se repite mucho
		function run(){
			window.requestAnimationFrame(run)
			upt();
			paint(ctx);
		}

		function init(){
			canvas = document.getElementById('canvas');
			ctx = canvas.getContext('2d');

			player = new Rectangle(x,y,10,10,"#00FF00")
			comida = new Rectangle((canvas.width/2-10),(canvas.height/2-10),10,10,"red")

			ctx.fillStyle = "rgb(255, 255, 255)"
			ctx.fillRect(20,50, 100,canvas.height-10);
			ctx.fillStyle = "rgb(0, 0, 0)";
            ctx.font = "18px Arial";
            ctx.fillText("Puntaje: ", 20,canvas.height-10);

            walls.push(new Rectangle(120,120,10,10,"gray")); 
            walls.push(new Rectangle(220,400,10,10,"gray"));
            walls.push(new Rectangle(100,400,10,10,"gray"));
            walls.push(new Rectangle(300,120,10,10,"gray"));

			run();
		}

		window.addEventListener('load',init,false);  

		document.addEventListener('keydown',function(e){
			if(e.keyCode== 87 || e.keyCode == 38){
				direccion = arriba;
			}
			if(e.keyCode== 83 || e.keyCode == 40){
				direccion = abajo;
			}
			if(e.keyCode== 65 || e.keyCode == 37){
				direccion = izquierda;
			}
			if(e.keyCode== 68 || e.keyCode == 39){
				direccion = derecha;
			}
			if(e.keyCode == 32){
				

				if(pausa == false){
					pausa = true
				}else{
					pausa = false
				}
			}
			console.log(e.keyCode)
		})
		 
		function random(x){
			return Math.floor(Math.random()*x)
		}

		



			}

		//}
	</script>

</body>
</html>